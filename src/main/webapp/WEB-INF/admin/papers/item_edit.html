<#-- 试卷题目编辑 -->
<#include "ftl/comm.ftl"/>
<#assign module="papers_paper_add_structure_item"/>
<#--
题型处理页面需实现下列javascript函数方法：
	1.${module}_validate();验证表单提交 返回true，false。 
    2.${module}_update();表单提交数据,StructureItemInfo的json数据格式。
	3.${module}_load(data);编辑加载数据，data为StructureItemInfo的json数据格式。
-->
<#include "papers/item_edit_${CURRENT_ITEM_TYPE}.html"/>
<script type="text/javascript">
<!--
$(function(){
	//pre load
	${module}_${CURRENT_ITEM_TYPE}_last_load = function(value){
		if(value && value > 0){
			setOrderNoAndSerialValue(value);
			return;
		}
		var paperId = "${CURRENT_PAPER_ID}";
		if($.trim(paperId) != "" &&  $.trim($("#${module}_${CURRENT_ITEM_TYPE}_edit_form input[name='id']").val()) == ""){
			$.getJSON("<@s.url '/admin/papers/paper/item/maxorder/'/>" + paperId,function(value){
				setOrderNoAndSerialValue(value);
			});
		}
	}
	function setOrderNoAndSerialValue(value){
		if(!value)return;
		value += 1;
		$("#${module}_${CURRENT_ITEM_TYPE}_edit_form").form("load",{orderNo:value,serial:value});
	};
});
//-->
</script>