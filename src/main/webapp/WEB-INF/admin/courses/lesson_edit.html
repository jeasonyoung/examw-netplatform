<#--课时编辑页面 -->
<#include "ftl/comm.ftl"/>
<#assign module="courses_lesson"/>
<#assign form="${module}_edit_form"/>
<script type="text/javascript">
<!--
$(function(){
	//fileupload
	$("#${form}_file_upload").uploadify({
		swf:"<@s.url '/resources/uploadify/uploadify.swf'/>",
		uploader:"<@s.url '/uploads/upload'/>",
		method:"POST",
		fileObjName:"file",
		buttonText:"上传讲义附件",
		height:20,
		multi:false,
		fileExt:"*.*",
		fileDesc:"请选择讲义附件上传",
		uploadLimit:1024000,//10M
		auto:true,
		queueID:"${form}_file_queue",
		onUploadError : function(file, errorCode, errorMsg){
			$.messager.show({
				title:"上传文件异常",
				msg:errorCode + "|" + errorMsg
			});
		},
		onUploadSuccess:function(file, data, response){
			if(!data){
				$.messager.show({
					title:"上传文件失败",
					msg:"服务器端发生异常，未反馈数据！"
				});
				return;
			}
			var result = $.parseJSON(data)
			if(result){
				$("#${form} input[name='attachUrl']").val(result.url);
			}
		}
	});
});
//-->
</script>
<form id="${form}" class="easyui-tabs" method="POST" style="padding:2px;">
	<div title="基本信息">
		<div style="float:left;margin-top:12px;width:100%;">
			<label style="width:100px;">课时资源名称：</label>
			<input type="text" name="name" class="easyui-validatebox" data-options="required:true" style="width:628px;"/>
			<input type="hidden" name="id"/>
		</div>
		<div style="float:left;margin-top:10px;width:100%;">
			<label style="width:100px;"></label>
			<textarea name="description" class="easyui-kindeditor" data-options="minWidth:628,minHeight:220" rows="10" cols="20" />
		</div>
		<div style="float:left;margin-top:12px;width:100%;">
			<div style="float:left;">
				<label style="width:100px;">所属班级：</label>
				<input type="text" name="classId" class="easyui-combobox" data-options="
						url:'<@s.url '/admin/courses/classplan/all'/>',
						required:true,
						valueField:'id',
						textField:'name',
						onLoadError:function(e){
							<@error_dialog 'e'/>
						}
					" style="width:368px;"/>
			</div>
			<div style="float:left;">
				<label style="width:100px;">视频模式：</label>
				<label style="padding-top:0;"><input type="radio" name="videoMode" value="${VIDEO_NOTFREE_VALUE}" />${VIDEO_NOTFREE_NAME}</label>
				<label style="padding-top:0;"><input type="radio" name="videoMode" value="${VIDEO_FREE_VALUE}" checked="checked" />${VIDEO_FREE_NAME}</label>
			</div>
		</div>
		<div style="float:left;margin-top:12px;width:100%;">
		      <label style="width:100px;">视频地址：</label>
		      <input type="text" name="videoUrl" style="width:628px;" />
		</div>
		<div style="float:left;margin-top:12px;width:100%;">
		      <label style="width:100px;">高清视频地址：</label>
		      <input type="text" name="highVideoUrl" style="width:628px;" />
		</div>
		<div style="float:left;margin-top:12px;width:100%;">
		      <label style="width:100px;">排序号：</label>
		      <input type="text" name="orderNo" class="easyui-numberspinner" data-options="required:true,min:1,value:1,editable:true" style="width:80px;" />
		</div>
	</div>
	<div title="讲义内容 ">
		<div style="float:left;margin-top:2px;width:100%;">
			<textarea name="handoutContent" class="easyui-kindeditor" rows="10" cols="20" style="width:760px;height:410px;"/>
		</div>
		<div style="float:left;margin-top:12px;width:100%;">
			<div style="float:left;">
				<label style="width:75px;">讲义附件：</label>
				<input type="text" name="attachUrl"  style="width:548px;" />
				<div id="${form}_file_queue"  style="position:absolute;border:solid 0px red;"/>
			</div>
			<div style="float:left;margin-left:5px;">
				<input id="${form}_file_upload" name="file" type="file" style="width:100px;"/>
			</div>
		</div>
	</div>
</form>