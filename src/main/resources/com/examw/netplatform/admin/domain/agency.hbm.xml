<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.examw.netplatform.domain.admin.agency">
	<!-- 培训机构 -->
	<class name="Agency"  table="tbl_Netplatform_Agency_Registers" >
		<!-- 开启二级缓存 -->
		<cache usage="read-write" />
		<!-- 培训机构ID -->
		<id name="id"  type="string"  length="64" />
		<!-- 培训机构名称 -->
		<property name="name"  type="string"  length="100"  not-null="true" />
		<!-- 中文简称 -->
		<property name="abbr_cn"  type="string"  length="20"  />
		<!-- 英文简称 -->
		<property name="abbr_en"  type="string"  length="15"  unique="true" />
		<!-- 关键字 -->
		<property name="keywords"  type="string"  length="45" />
		<!-- 培训机构地址 -->
		<property name="address"  type="string"  length="512" />
		<!-- 联系电话 -->
		<property name="tel"  type="string"  length="45" />
		<!--  传真号码 -->
		<property name="fax"  type="string"  length="45" />
		<!-- 机构简介 -->
		<property name="introduction"  type="text" />
		<!-- 备注 -->
		<property name="remarks"  type="string"  length="256" />
		<!-- logo url -->
		<property name="logo_url"  type="string"  length="128" />
		<!-- 培训机构状态 -->
		<property name="status"  type="integer" />
		<!-- 套餐上限 -->
		<property name="packageCount"  column="package_count"  type="integer" />
		<!-- 用户上限 -->
		<property name="accountCount"  column="account_count"  type="integer" />
		<!-- 所属角色 -->
		<set name="roles" inverse="false" cascade="save-update"  table="tbl_Netplatform_Agency_Registers_Roles">
			<!--  机构ID -->
			<key column="agency_id" />
			<!-- 角色ID -->
     	 	<many-to-many  class="com.examw.netplatform.domain.admin.security.Role"  column="role_id" />
		</set>
		<!--创建时间 -->
		<property name="createTime" column="create_time" type="timestamp" />
		<!--最新修改时间 -->
		<property name="lastTime" column="last_time" type="timestamp" />
	</class>
	<!-- 培训机构用户 -->
	<class name="AgencyUser" table="tbl_Netplatform_Security_AgencyUsers">
		<!-- 开启二级缓存 -->
		<cache usage="read-write" />
		<!-- 机构用户ID -->
		<id name="id"  type="string"  length="64" />
		<!-- 所属培训机构 -->
		<many-to-one name="agency" column="agency_id"  class="Agency" />
		<!-- 所属用户 -->
		<many-to-one name="user" column="user_id" class="com.examw.netplatform.domain.admin.security.User"/>
		<!-- 用户身份 -->
		<property name="identity" type="integer" />
		<!--创建时间 -->
		<property name="createTime" column="create_time" type="timestamp" />
		<!--最新修改时间 -->
		<property name="lastTime" column="last_time" type="timestamp" />
	</class>
</hibernate-mapping>